<script lang="ts">
  import type { CompareTableData } from '$lib/types/widgets';

  export let data: CompareTableData;

  function formatPrice(price: number): string {
    return (price / 10000).toFixed(1) + 'ì–µ';
  }
</script>

<div class="bg-zinc-800/50 rounded-lg p-4 border border-zinc-700 overflow-x-auto">
  <h3 class="text-sm font-medium text-zinc-300 mb-3">ğŸ“Š ë‹¨ì§€ ë¹„êµ</h3>
  <table class="w-full text-sm">
    <thead>
      <tr class="text-zinc-400 border-b border-zinc-700">
        <th class="text-left py-2 px-2">ë‹¨ì§€ëª…</th>
        <th class="text-right py-2 px-2">í‰ê· ê°€</th>
        <th class="text-right py-2 px-2">í‰ë‹¹ê°€</th>
        <th class="text-right py-2 px-2">ì„¸ëŒ€ìˆ˜</th>
        <th class="text-right py-2 px-2">ì¤€ê³µ</th>
      </tr>
    </thead>
    <tbody>
      {#each data.items as item}
        <tr class="border-b border-zinc-700/50 hover:bg-zinc-700/30">
          <td class="py-2 px-2 text-zinc-200">{item.name}</td>
          <td class="py-2 px-2 text-right text-orange-400">{formatPrice(item.avgPrice)}</td>
          <td class="py-2 px-2 text-right text-zinc-300">{item.pricePerPyeong.toLocaleString()}ë§Œ</td>
          <td class="py-2 px-2 text-right text-zinc-400">{item.totalUnits.toLocaleString()}</td>
          <td class="py-2 px-2 text-right text-zinc-400">{item.buildYear}ë…„</td>
        </tr>
      {/each}
    </tbody>
  </table>
</div>
